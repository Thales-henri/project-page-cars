<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Digital Marketcars</title>
  <link rel="stylesheet" href="style_home.css">
</head>

<body>
  <header>
    <img id="img" src="/img/Digitalmarketcars.png" alt="img logo">
    <nav>
      <ul>
        <a href="/Home.html">
          <li>Home</li>
        </a>
        <a href="/carros.html">
          <li>Carros</li>
        </a>
        <a href="/login.html" id="link-auth">
          <li id="texto-auth">Login</li>
        </a>
      </ul>
    </nav>
  </header>
  <section class="container">
    <div class="cars_orders">
      <div class='carrossel_slides'>
        <div class="car_inner" id="carrossel-container">        
        </div>
        <div class="cars_indicators" id="carrossel-indicators">
          <div>
            <button id="1" class="button active"></button>
          </div>
          <div>
            <button id="2" class="button"></button>
          </div>
          <div>
            <button id="3" class="button"></button>
          </div>
          <div>
            <button id="4" class="button"></button>
          </div>
          <div>
            <button id="5" class="button"> </button>
          </div>
        </div>
      </div>
    </div>
<section class="home_presentation">
  <div class="home_presentation_content">
    <h1> <span>Bem-vindo à Digital Marketcars</span></h1>

    <p>
      Encontre o carro perfeito para o seu estilo de vida! Aqui você descobre modelos modernos,
      seminovos de confiança e ofertas exclusivas escolhidas especialmente para você.
    </p>

    <p>
      Explore, compare e escolha com segurança — a sua próxima conquista está a um clique de distância.
    </p>

    <h2>Digital Marketcars — conectando você ao carro dos seus sonhos.</h2>
  </div>
</section>


  </section>
  <script src="script.js"></script>

</body>

<script>

function logout(){
  localStorage.removeItem('usuario')
  window.location.href="/Home.html"
}

const linkAuth = document.getElementById('link-auth');
const textoAuth = document.getElementById('texto-auth');
const usuarioLogado = localStorage.getItem('usuario'); 

function logout() {
    localStorage.removeItem('usuario');
    window.location.href = "/Home.html"; 
    localStorage.clear()
}


if (usuarioLogado) {
    
    textoAuth.textContent = "Logout";
    
    linkAuth.href = "#"; 
    linkAuth.onclick = logout;
    
} else {
    
    textoAuth.textContent = "Login";
    
    linkAuth.href = "/login.html";
    
    linkAuth.onclick = null; 
}

async function carregarCarrossel() {
  const resposta = await fetch("http://localhost:3004/carros/listar"); 
  const carros = await resposta.json();

  const container = document.getElementById("carrossel-container");
  const indicadores = document.getElementById("carrossel-indicators");

  container.innerHTML = "";
  indicadores.innerHTML = "";

  carros.forEach((carro, index) => {
    const item = document.createElement("div");
    item.classList.add("carrossel_item");
    if (index == 0) item.classList.add("active");

    item.innerHTML = `
      <a href="/carros.html" class="cars">
        <img src="http://localhost:3004/image//${carro.imagem}">
      </a>
      <div class="car_info_inside">
        <h2>${carro.marca} ${carro.modelo} / ${carro.ano} </h2>
      </div>
      <div class="car_info_outside">
        <h2> APENAS R$:${carro.preco}</h2>
      </div>`;

    container.appendChild(item);
    const indicador = document.createElement("button");
    indicador.classList.add("button");
    if (index == 0) indicador.classList.add("active");
    indicador.onclick = () => moverParaSlide(index);
    indicadores.appendChild(indicador);
  });
}

function moverParaSlide(index) {
  const slides = document.querySelectorAll(".carrossel_item");
  const buttons = document.querySelectorAll(".cars_indicators button");

  slides.forEach(s => s.classList.remove("active"));
  buttons.forEach(b => b.classList.remove("active"));

  slides[index].classList.add("active");
  buttons[index].classList.add("active");
}

let slideAtual = 0;
setInterval(() => {
  const slides = document.querySelectorAll(".carrossel_item");
  slideAtual = (slideAtual + 1) % slides.length;
  moverParaSlide(slideAtual);
}, 3000);

carregarCarrossel();

</script>

</html>